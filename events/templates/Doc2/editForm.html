{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>

{% if messages %}
    <ul class="messages">
        {% for message in messages %}
                      <div class="alert alert-dismissible alert-warning">
              <button type="button" class="close" data-dismiss="alert">
              ×
              </button>
              <strong>{{message}}</strong>
        </div>
        {% endfor %}
    </ul>
{% endif %}
<div class="container p-3">
    <div class="contact-box">
<form method="post">
    {% csrf_token %}
    <div class="mb-3">
        <label for="nr_zp" class="form-label fw-bold">NrZp</label>
        <input type="text" name="NrZp"  value="{{ data.NrZp }}" class="form-control"  id="id_NrZp" readonly>
    </div>

    <div class="row g-3 mb-3">
        <div class="col-auto">
            <label  class="form-label " style="display: inline-block;">Artykul:</label>
            <input type="text"  class="form-control"   style="display: inline-block; width: auto;" readonly value="{{ data.Artykul }}">
        </div>
            <div class="col-auto">
                <label  class="form-label" style="display: inline-block;">Rodzaj:</label>
                 <input type="text" name="Rodzaj"  style="display: inline-block; width: auto;"  value="{{ data.Rodzaj }}" class="form-control"  id="id_Rodzaj" readonly>
            </div>
          <div class="col-auto">
                <label  class="form-label" style="display: inline-block;">Operator:</label>
                 <input type="text" class="form-control" name="UserName"  style="display: inline-block; width: auto;" id="id_UserName" value="{{ rols.UserName }}" readonly>
            </div>
          <div class="col-auto">
                <label  class="form-label" style="display: inline-block;">Dolne Odch:</label>
                 <input type="text" class="form-control" name="DolneOdch"  style="display: inline-block; width: auto;" id="id_DolneOdch" value="{{ data.DolneOdch }}" readonly>
            </div>
          <div class="col-auto">
                <label  class="form-label" style="display: inline-block;">WagaRolkiZlec:</label>
                 <input type="text" class="form-control" name="WagaRolkiZlec"  style="display: inline-block; width: auto;" id="id_WagaRolkiZlec" value="{{ data.WagaRolkiZlec | readable_integer }}" readonly>
            </div>
    </div>

    <div class="mb-3">
        <label for="data" class="form-label fw-bold">Data produkcji</label>
        <input style="border-color: #FF0000;" type="date" name="Data"  class="form-control"  id="id_Data" value="{{ rols.Data }}">
    </div>
    <div class="row g-3 mb-3">
      <div class="col-auto">
        <label for="data" class="form-label">Zmiana</label>
        <input style="border-color: #CCCCCC;" type="number" class="form-control" name="Zmiana" id="id_Zmiana" value="{{ rols.Zmiana }}" readonly >
      </div>
        <div class="col-auto">
        <label for="rolka" class="form-label">Nr Rolki</label>
        <input type="text" class="form-control"  name="Rolka" id="id_Rolka" value="{{ rols.Rolka }}" readonly>
      </div>
        <div class="col-auto">
            <label for="status" class="form-label">NrWytł</label>
            <select style="border-color: #FF0000;" class="form-select" name="NrWytl" id="id_NrWytl" aria-label="Default select example">
              <option value="0">W1</option>
              <option value="1">W2</option>
              <option value="2">W3</option>
        </select>
    </div>
    </div>

    <div class="row g-3 mb-3">
      <div class="col-auto">
        <label for="dlugrolkiprod" class="form-label">DługRolkiProd [mb]</label>
        <input style="border-color: #FF0000;" onkeyup="addSeparator('id_DlugRolkiProd')"  type="text" class="form-control" name="DlugRolkiProd" id="id_DlugRolkiProd" value="{{ rols.DlugRolkiProd | readable_integer}}">
      </div>
        <div class="col-auto">
        <label for="wagarolkiprod" class="form-label">WagaRolkiProd [kg]</label>
        <input style="border-color: #FF0000;" onkeyup="addSeparator('id_WagaRolkiProd')" type="text" class="form-control"  name="WagaRolkiProd" id="id_WagaRolkiProd" value="{{ rols.WagaRolkiProd | readable_integer}}" onchange="wynikFunc()">
      </div>
          <div class="col-auto ">
            <label class="form-label" for="walce">Walce</label>
            <input style="border-color: #FF0000;" onkeyup="addSeparator('id_Walce')" type="text"  name="Walce" id="id_Walce" class="form-control" value="{{ rols.Walce | readable_integer }}" />
        </div>
          <div class="col-auto ">
            <label class="form-label" for="slimak">Ślimak</label>
            <input style="border-color: #FF0000;" onkeyup="addSeparator('id_Slimak')"  type="text"  name="Slimak" id="id_Slimak" class="form-control" value="{{ rols.Slimak | readable_integer }}"/>
        </div>
    </div>

    <div class="row g-2 mb-3">
        <div class="col_auto">
            <label for="grubosc" class="form-label">Wynikowa grubość [mikrony]</label>
            <input style="border-color: #CCCCCC;" type="text" class="form-control" name="Wynikowa" id="id_Wynikowa" value="{{ rols.Wynikowa | readable_integer  }}" readonly>
        </div>
         <div class="col_auto">
            <label for="wynik" class="form-label">GrubośćWynik %</label>
            <input style="border-color: #CCCCCC;" type="text"  class="form-control" name="Wynik" id="id_Wynik"  value="{{ rols.Wynik | readable_integer }}" readonly>
        </div>
    </div>

    <div class="row g-2 mb-3">
        <div class="col_auto">
            <label for="mieszanka" class="form-label">Mieszanka</label>
            <input   style="border-color: #00BFFF;" type="text" class="form-control" name="Mieszanka" id="id_Mieszanka" value="{{ rols.Mieszanka | default_if_none:''  }}" maxlength="40">
        </div>
         <div class="col_auto">
            <label for="uwagi" class="form-label">Uwagi</label>
            <input  style="border-color: #00BFFF;" type="text" class="form-control" name="Uwagi" id="id_Uwagi" value="{{ rols.Uwagi | default_if_none:''  }}"  maxlength="40">
        </div>
    </div>

   <div class="col text-center">
        <button type="button" class="btn btn-primary fw-bold" onclick="window.location.href='{% url 'Home.views.index' %}'">Anuluj</button>
      <button type="submit" class="btn btn-secondary fw-bold">Zapisz</button>
    </div>

</form>
     </div>
    </div>
</body>
</html>
<script type="text/javascript">
    var rodzaj = document.getElementById("id_NrWytl");
  var selectedValue = "{{ rols.NrWytl }}";  // Assuming form is a valid context variable in your template

  for (var i = 0; i < rodzaj.options.length; i++) {
    if (rodzaj.options[i].value == selectedValue) {
      rodzaj.selectedIndex = i;
      break;
    }
  }
</script>

 <script type="text/javascript">

        function wynikFunc() {
  var input = document.getElementById('id_DolneOdch');
  var input2 = document.getElementById('id_WagaRolkiProd');
  var input3 = document.getElementById('id_WagaRolkiZlec');
  if (input.value.trim() && input2.value.trim() && input3.value.trim()) {
    var zakaldka = document.getElementById('id_Wynikowa');
    var value1 = input.value.replace(/ /g, '');
    var value2 = input2.value.replace(/ /g, '');
    var value3 = input3.value.replace(/ /g, '');
    if (/^\d*\.?\d+$/.test(value1) && /^\d*\.?\d+$/.test(value2) && /^\d*\.?\d+$/.test(value3)) {
      var result = (parseFloat(value1) * parseFloat(value2)) / parseFloat(value3);
      if (!isNaN(result)) {
        zakaldka.value = result.toFixed(2);
        wynikowaFunc();
        addSeparator('id_Wynikowa');
      }
    } else {
      zakaldka.value = "";
    }
  }
}

function wynikowaFunc() {
  var input = document.getElementById('id_Wynikowa');
  var input2 = document.getElementById('id_DolneOdch');

  if (input.value.trim() && input2.value.trim()) {
    var waga = document.getElementById('id_Wynik');
    var value1 = input.value.replace(/ /g, '');
    var value2 = input2.value.replace(/ /g, '');
    if (/^\d*\.?\d+$/.test(value1) && /^\d*\.?\d+$/.test(value2)) {
      var result = parseFloat(value1) / parseFloat(value2) * 100;
      if (!isNaN(result)) {
        waga.value = result.toFixed(2);
        addSeparator('id_Wynik');
      }
    } else {
      waga.value = '';
    }
  }
}
</script>
 <script src={% static "js/sep.js" %}></script>